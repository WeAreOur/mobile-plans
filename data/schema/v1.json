{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Mobile Plan",
  "type": "object",
  "required": ["provider", "name", "price", "currency", "data", "status", "metadata"],
  "properties": {
    "provider": {
      "type": "string",
      "description": "Provider name (e.g., 'EE', 'Three')"
    },
    "name": {
      "type": "string",
      "description": "Plan name (e.g., 'Essential Plan', 'Unlimited Max')"
    },
    "price": {
      "type": "number",
      "description": "Monthly price"
    },
    "currency": {
      "type": "string",
      "enum": ["GBP", "USD", "EUR"],
      "description": "ISO currency code"
    },
    "data": {
      "type": "string",
      "description": "Data allowance (e.g., '50GB', 'Unlimited')"
    },
    "minutes": {
      "type": "string",
      "description": "Voice minutes (e.g., 'Unlimited', '500')"
    },
    "texts": {
      "type": "string",
      "description": "SMS allowance (e.g., 'Unlimited', '1000')"
    },
    "contractLength": {
      "type": "string",
      "description": "Contract term (e.g., '30 days', '12 months', 'Pay as you go')"
    },
    "status": {
      "type": "string",
      "enum": ["draft", "incomplete", "complete"],
      "description": "Data completeness status"
    },
    "metadata": {
      "type": "object",
      "required": ["sourceUrl"],
      "properties": {
        "verifiedBy": {
          "type": "string",
          "description": "Who verified this data (provider account or trusted contributor)"
        },
        "sourceUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL where this plan can be found"
        },
        "archiveUrl": {
          "type": "string",
          "format": "uri",
          "description": "Archive.org snapshot for historical reference"
        },
        "confidence": {
          "type": "string",
          "enum": ["official", "verified", "community", "disputed"],
          "description": "Data confidence level"
        },
        "effectiveDate": {
          "type": "string",
          "format": "date",
          "description": "When this plan became available"
        },
        "expiryDate": {
          "type": "string",
          "format": "date",
          "description": "When this plan expires (if known)"
        },
        "notes": {
          "type": "string",
          "description": "Additional context or caveats"
        }
      }
    }
  }
}
